<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Admin | Project Details</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://unpkg.com/lucide@latest"></script>
<link rel="stylesheet" href="../assets/css/theme.css"/>

<style>
  /* Match dark neon admin theme */
  body {
    background-color: #0b0f17;
    color: var(--text);
    font-family: "Inter", sans-serif;
  }

  .navbar {
    background: rgba(11, 15, 23, 0.95);
    border-bottom: 1px solid rgba(0,255,247,.15);
    backdrop-filter: blur(8px);
  }

  .navbar .nav-link {
    color: var(--muted);
  }

  .navbar .nav-link.active {
    color: var(--neon);
  }

  .btn-neon {
    background: var(--neon);
    color: #000;
    border: none;
  }
  .btn-neon:hover {
    background: rgba(0,255,247,.85);
    color: #000;
  }

  .card {
    background: rgba(0,255,247,.05);
    border: 1px solid rgba(0,255,247,.15);
    border-radius: 12px;
    color: var(--text);
    transition: all .3s ease;
  }

  .card:hover {
    box-shadow: 0 4px 15px rgba(0,255,247,.1);
  }

  .detail-label {
    font-size: 0.85rem;
    color: var(--muted);
    text-transform: uppercase;
  }

  .detail-value {
    font-weight: 600;
    color: var(--text);
  }

  .status-pill {
    display: inline-block;
    padding: 0.35rem 0.75rem;
    border-radius: 1rem;
    font-size: 0.8rem;
    font-weight: 500;
  }

  .status-Design { background: rgba(0,255,247,.1); color: var(--neon); }
  .status-Build { background: rgba(255,193,7,.15); color: #ffc107; }
  .status-Review { background: rgba(0,255,247,.15); color: #00fff7; }
  .status-Complete { background: rgba(40,167,69,.15); color: #28a745; }

  .fade-in {
    animation: fadeIn .6s ease-in-out;
  }

  @keyframes fadeIn {
    from {opacity: 0; transform: translateY(10px);}
    to {opacity: 1; transform: translateY(0);}
  }

  footer {
    text-align: center;
    color: var(--muted);
    padding: 1rem 0;
    border-top: 1px solid rgba(0,255,247,.1);
  }
</style>
</head>

<body class="d-flex flex-column min-vh-100">
<nav class="navbar navbar-expand-lg sticky-top">
  <div class="container-fluid">
    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="mainNav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item"><a class="nav-link" href="index.html">Dashboard</a></li>
        <li class="nav-item"><a class="nav-link" href="users.html">Users</a></li>
        <li class="nav-item"><a class="nav-link active" href="projects.html">Projects</a></li>
        <li class="nav-item"><a class="nav-link" href="reports.html">Reports</a></li>
        <li class="nav-item"><a class="nav-link" href="settings.html">Settings</a></li>
      </ul>
      <button class="btn btn-sm btn-neon" onclick="logout()">
        <i data-lucide='log-out'></i> Logout
      </button>
    </div>
  </div>
</nav>

<main class="flex-fill container py-4 fade-in">
  <script>requireRole('admin');</script>

  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="text-neon fw-semibold">Project Details</h3>
    <button class="btn btn-outline-neon btn-sm" onclick="window.location.href='projects.html'">
      <i data-lucide="arrow-left"></i> Back
    </button>
  </div>

  <!-- Project Details -->
  <div class="card p-4 mb-4">
    <div class="row g-4">
      <div class="col-md-4">
        <div class="detail-label">Project ID</div>
        <div class="detail-value" id="projID">--</div>
      </div>
      <div class="col-md-4">
        <div class="detail-label">Project Name</div>
        <div class="detail-value" id="projName">--</div>
      </div>
      <div class="col-md-4">
        <div class="detail-label">Client</div>
        <div class="detail-value" id="projClient">--</div>
      </div>

      <div class="col-md-4">
        <div class="detail-label">Stage</div>
        <div class="detail-value"><span class="status-pill" id="projStage">--</span></div>
      </div>
      <div class="col-md-4">
        <div class="detail-label">Owner</div>
        <div class="detail-value" id="projOwner">--</div>
      </div>
      <div class="col-md-4">
        <div class="detail-label">ETA</div>
        <div class="detail-value" id="projETA">--</div>
      </div>
    </div>
  </div>

  <!-- Overview -->
  <div class="card p-4 mb-4">
    <h5 class="fw-semibold text-neon mb-3">Project Overview</h5>
    <p id="projDesc" class="mb-0">-- No description available --</p>
  </div>

  <!-- Updates -->
  <div class="card p-4">
    <h5 class="fw-semibold text-neon mb-3">Recent Updates</h5>
    <ul id="projUpdates" class="list-group list-group-flush bg-transparent">
      <li class="list-group-item bg-transparent border-0 ps-0">Loading updates...</li>
    </ul>
  </div>
</main>

<footer>© 2025 AutoLogic Automation Portal</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="../assets/js/auth.js"></script>
<script src="../assets/js/ui.js"></script>

<script>
if(window.lucide) lucide.createIcons();

const projectData = {
  "AP-1023": {
    id: "AP-1023",
    name: "Packaging Retrofit",
    client: "AutoLogic",
    stage: "Build",
    owner: "J. Patel",
    eta: "Oct 10",
    desc: "Upgrading existing packaging lines with robotic automation and smart inspection systems.",
    updates: [
      "Design approved by client.",
      "Procurement phase in progress.",
      "System build scheduled to begin next week."
    ]
  },
  "AP-1041": {
    id: "AP-1041",
    name: "SCADA Migration",
    client: "VectorWorks",
    stage: "Review",
    owner: "M. Singh",
    eta: "Sep 22",
    desc: "Migrating legacy SCADA infrastructure to a modern, secure, and web-based monitoring platform.",
    updates: [
      "Core migration complete.",
      "Testing phase ongoing.",
      "Preparing documentation for client review."
    ]
  },
  "AP-1050": {
    id: "AP-1050",
    name: "Robot Integration",
    client: "NovaTech",
    stage: "Design",
    owner: "A. Verma",
    eta: "Nov 05",
    desc: "Integrating industrial robots with PLCs to optimize assembly operations and reduce manual workload.",
    updates: [
      "Robot layout design completed.",
      "PLC communication setup done.",
      "Awaiting mechanical approvals."
    ]
  }
};

const id = localStorage.getItem('viewProjectID');
if (id && projectData[id]) {
  const p = projectData[id];
  document.getElementById('projID').innerText = p.id;
  document.getElementById('projName').innerText = p.name;
  document.getElementById('projClient').innerText = p.client;
  document.getElementById('projStage').innerText = p.stage;
  document.getElementById('projStage').classList.add('status-' + p.stage);
  document.getElementById('projOwner').innerText = p.owner;
  document.getElementById('projETA').innerText = p.eta;
  document.getElementById('projDesc').innerText = p.desc;

  const list = document.getElementById('projUpdates');
  list.innerHTML = "";
  p.updates.forEach(u => {
    const li = document.createElement('li');
    li.className = "list-group-item bg-transparent border-0 ps-0";
    li.textContent = "• " + u;
    list.appendChild(li);
  });
} else {
  Swal.fire({
    icon: 'info',
    title: 'No Project Selected',
    text: 'Please go back and select a project.',
    confirmButtonText: 'Back to Projects',
    background: '#0b0f17',
    color: '#00fff7'
  }).then(() => window.location.href = 'projects.html');
}
</script>
</body>
</html>

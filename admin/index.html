<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin | Dashboard</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="stylesheet" href="../assets/css/theme.css" />

  <style>
    /* Preserve theme variables from theme.css. Only small layout tweaks here. */

    main.container {
      padding-top: 1.25rem;
      padding-bottom: 3.5rem;
    }

    .kpi-row .card {
      border-radius: 12px;
      padding: 1rem;
      background: var(--panel);
      border: 1px solid rgba(0,255,247,.06);
      box-shadow: 0 6px 20px rgba(0,255,247,.03);
      transition: transform .12s ease, box-shadow .12s ease;
    }

    .kpi-row .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0,255,247,.05);
    }

    .kpi-title {
      color: var(--muted);
      font-size: .9rem;
      margin-bottom: .35rem;
    }

    .kpi-number {
      color: var(--neon);
      font-weight: 700;
      font-size: 1.6rem;
    }

    .panel {
      background: var(--panel);
      border: 1px solid rgba(0,255,247,.06);
      border-radius: 12px;
      padding: 1rem;
      box-shadow: 0 6px 18px rgba(0,255,247,.03);
    }

    .card-subtle {
      background: transparent;
      border: none;
      padding: 0;
    }

    /* Force dark table background and text color */
.table {
  background-color: #0b0f17 !important;   /* full dark background */
  color: var(--text) !important;
  border-collapse: separate;
  border-spacing: 0;
}

/* Header styling */
.table thead th {
  background-color: #0b0f17 !important;
  color: var(--neon) !important;
  border-bottom: 2px solid rgba(0, 255, 247, .25);
}

/* Table body cells */
.table tbody td {
  background-color: #0b0f17 !important;
  color: var(--text) !important;
  border-top: 1px solid rgba(0, 255, 247, .1);
}

/* Hover effect for rows */
.table-hover tbody tr:hover td {
  background-color: rgba(0, 255, 247, .08) !important;
  color: var(--text) !important;
}

/* Optional: clickable link color inside table (neon) */
.table a {
  color: var(--neon);
  text-decoration: none;
}

.table a:hover {
  text-decoration: underline;
}


    footer.site-footer {
      margin-top: 2rem;
      text-align: center;
      color: var(--muted);
      font-size: .85rem;
      padding: .6rem 0;
    }
  </style>
</head>

<body class="d-flex flex-column min-vh-100">
  <!-- NAVBAR (unchanged as requested) -->
   
  <nav class="navbar navbar-expand-lg sticky-top">
    <div class="container-fluid">
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#mainNav">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="mainNav">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item"><a class="nav-link" href="index.html">Dashboard</a></li>
          <li class="nav-item"><a class="nav-link" href="users.html">Users</a></li>
          <li class="nav-item"><a class="nav-link" href="projects.html">Projects</a></li>
          <li class="nav-item"><a class="nav-link" href="reports.html">Reports</a></li>
          <li class="nav-item"><a class="nav-link" href="settings.html">Settings</a></li>
        </ul>
        <div class="d-flex align-items-center gap-2">
          <button class="btn btn-sm btn-neon" onclick="logout()"><i data-lucide="log-out"></i> Logout</button>
        </div>
      </div>
    </div>
  </nav>

  <!-- MAIN -->
  <main class="container flex-fill">
    <script>if(typeof requireRole === 'function') requireRole('admin');</script>

    <!-- Top row: Title + summary -->
    <div class="d-flex justify-content-between align-items-center mb-3">
      <div>
        <h2 class="mb-0 neon">Dashboard</h2>
        <small class="text-muted">Overview · System health · Recent activity</small>
      </div>
      <div class="d-flex gap-2">
        <button class="btn btn-outline-neon btn-sm" onclick="location.href='analytics.html'">
          <i data-lucide="trending-up"></i> Analytics
        </button>
        <button class="btn btn-outline-neon btn-sm" onclick="location.href='notifications.html'">
          <i data-lucide="bell"></i> Notifications
        </button>
      </div>
    </div>

    <!-- KPI cards -->
    <div class="row g-3 kpi-row mb-3 row-cols-1 row-cols-md-2 row-cols-xl-4">
      <div class="col">
        <div class="card">
          <div class="kpi-title">Active Clients</div>
          <div class="kpi-number">54</div>
          <small class="text-muted">+4 since last week</small>
        </div>
      </div>
      <div class="col">
        <div class="card">
          <div class="kpi-title">Open Tickets</div>
          <div class="kpi-number">23</div>
          <small class="text-muted">-2 since yesterday</small>
        </div>
      </div>
      <div class="col">
        <div class="card">
          <div class="kpi-title">Monthly Revenue</div>
          <div class="kpi-number">$124k</div>
          <small class="text-muted">up 8% vs last month</small>
        </div>
      </div>
      <div class="col">
        <div class="card">
          <div class="kpi-title">System Uptime</div>
          <div class="kpi-number">99.9%</div>
          <small class="text-muted">last 30 days</small>
        </div>
      </div>
    </div>

    <!-- Charts + activity -->
    <div class="panel mb-3">
  <div class="d-flex justify-content-between mb-2">
    <h5 class="mb-0">System Throughput</h5>
    <small class="text-muted">Last 7 days</small>
  </div>
  <div class="chart-wrapper">
    <canvas id="mainChart"></canvas>
  </div>
</div>


        <div class="panel">
          <h5 class="mb-3">Recent Activity</h5>
          <div class="table-responsive">
            <table class="table table-hover align-middle mb-0">
              <thead>
                <tr>
                  <th style="width:6%">ID</th>
                  <th>User</th>
                  <th>Action</th>
                  <th class="text-end">Timestamp</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>1</td>
                  <td>John Doe</td>
                  <td>Created project</td>
                  <td class="text-end small text-muted">2025-09-03 09:12</td>
                </tr>
                <tr>
                  <td>2</td>
                  <td>Jane Smith</td>
                  <td>Updated settings</td>
                  <td class="text-end small text-muted">2025-09-03 08:54</td>
                </tr>
                <tr>
                  <td>3</td>
                  <td>Michael Lee</td>
                  <td>Closed ticket</td>
                  <td class="text-end small text-muted">2025-09-03 08:30</td>
                </tr>
                <tr>
                  <td>4</td>
                  <td>Alice Chen</td>
                  <td>New deployment</td>
                  <td class="text-end small text-muted">2025-09-02 17:20</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <div class="panel mb-3">
  <h5 class="mb-3">Tickets by Status</h5>
  <div class="chart-wrapper chart-small">
    <canvas id="ticketsChart"></canvas>
  </div>
</div>


        <div class="panel mb-3">
          <h6 class="neon mb-2">System Alerts</h6>
          <ul class="list-unstyled mb-0">
            <li class="mb-2">⚠️ High CPU load detected — <small class="text-muted">1 hr ago</small></li>
            <li class="mb-2">✅ Backup completed successfully — <small class="text-muted">3 hrs ago</small></li>
            <li class="mb-2">⚠️ Network latency spike — <small class="text-muted">5 hrs ago</small></li>
            <li>ℹ️ New client registered — <small class="text-muted">Today</small></li>
          </ul>
        </div>

        <div class="panel">
          <h6 class="mb-2">Quick Stats</h6>
          <div class="d-flex justify-content-between">
            <div>
              <div class="kpi-title">SLA Compliance</div>
              <div class="kpi-number">96%</div>
            </div>
            <div>
              <div class="kpi-title">Active Users</div>
              <div class="kpi-number">1,237</div>
            </div>
          </div>
        </div>

      </div>
    </div>

    <footer class="site-footer">© 2025 AutoLogic Automation Portal</footer>
  </main>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/js/auth.js"></script>
  <script src="../assets/js/ui.js"></script>

  <script>
    if (window.lucide) lucide.createIcons();

    // Charts initialization
    document.addEventListener('DOMContentLoaded', function () {
      // Throughput line chart
      const ctx1 = document.getElementById('mainChart');
      if (ctx1 && window.Chart) {
        new Chart(ctx1, {
          type: 'line',
          data: {
            labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
            datasets: [{
              label: 'Throughput',
              data: [12, 18, 13, 19, 22, 25, 21],
              borderColor: '#00fff7',
              backgroundColor: 'rgba(0,255,247,0.08)',
              fill: true,
              tension: .35,
              pointRadius: 3
            }]
          },
          options: {
            plugins: { legend: { display: false } },
            scales: {
              x: { ticks: { color: '#cfeff0' }, grid: { color: 'rgba(0,255,247,.03)' } },
              y: { ticks: { color: '#cfeff0' }, grid: { color: 'rgba(0,255,247,.03)' } }
            },
            maintainAspectRatio: false
          }
        });
      }

      // Tickets doughnut chart
      const ctx2 = document.getElementById('ticketsChart');
      if (ctx2 && window.Chart) {
        new Chart(ctx2, {
          type: 'doughnut',
          data: {
            labels: ['Open', 'In Progress', 'Resolved', 'Closed'],
            datasets: [{
              data: [23, 14, 32, 18],
              backgroundColor: ['rgba(0,255,247,.85)', 'rgba(0,255,247,.6)', 'rgba(0,255,247,.4)', 'rgba(0,255,247,.25)'],
              borderWidth: 0
            }]
          },
          options: {
            plugins: {
              legend: { position: 'bottom', labels: { color: '#cfeff0' } }
            },
            maintainAspectRatio: false
          }
        });
      }
    });
  </script>
</body>

</html>
